<html>
  <head>
    <script src="../js/interactive.js"></script>
    <script src="../js/UglifyJS/lib/parse-js.js"></script>
    <script>
      // test pretty code generation
      eval(iJS.P.toCode(parse("q = function(y) {return y*2}")));
      alert(q(10));
   
      // find local variables
      alert(
        iJS.localVariables(parse("q = function(x) {var y = 1; return x=x+y;}"))
      );
      alert(
        iJS.localVariablesScope(parse("q = function(x) {var y = 1; return x=x+y;}"))
      );
   
      // test preplaceLocalVariables
      p = function(x) {
        switch(x) {
          case "x": return "x1";
          case "y": return "y1";
          default: return x;
        }
      }
      alert(
        iJS.P.toCode(iJS.preplaceLocalVariables(
          parse("q = function(x) {var y = 1; return x=x+y;}"), p
        ))
      );
      
      // test linewise executable code generation
      f = iJS.G.gen(parse("x = 1; y = x;"));
      x = 10;
      f[1]();
      alert("y expected to be 10. y is " + y);
    </script>
  </head>
</html>